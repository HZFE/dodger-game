parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"foLc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PlayerStep=exports.PlayerHeight=exports.PlayerColor=exports.BulletOffset=exports.BulletSpeedRange=exports.BulletColorList=exports.BulletRadiusRange=exports.CountFont=exports.BulletCount=exports.BackgroundColor=void 0,exports.BackgroundColor="#f3f3f3",exports.BulletCount=25,exports.CountFont="50px Georgia",exports.BulletRadiusRange=[5,80],exports.BulletColorList=["#3da8f5","#d71345","#ffaf38","#f7acbc","#7b5d5f","#f47920","#f05b72"],exports.BulletSpeedRange=[3,7],exports.BulletOffset=300,exports.PlayerColor="#232323",exports.PlayerHeight=40,exports.PlayerStep=4;
},{}],"iWx2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){return function(t,e,r){this.ctx=t,this.x=e,this.y=r}}();exports.default=t;
},{}],"qxir":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../config"),o=e(require("./Sprite")),n=function(e){function o(t,o,n,i,l){var s=e.call(this,t,o,n)||this;return s.r=i,s.color=r.BulletColorList[~~(Math.random()*r.BulletColorList.length)],s.initBullet(l),s}return t(o,e),o.prototype.initBullet=function(t){var e=r.BulletSpeedRange[1]-(this.r-r.BulletRadiusRange[0])/(r.BulletRadiusRange[1]-r.BulletRadiusRange[0])*(r.BulletSpeedRange[1]-r.BulletSpeedRange[0]),o=t.x+(Math.random()*r.BulletOffset*2-r.BulletOffset),n=t.y+(Math.random()*r.BulletOffset*2-r.BulletOffset),i=Math.atan2(n-this.y,o-this.x);this.vx=Math.cos(i)*e,this.vy=Math.sin(i)*e},o.prototype.render=function(){this.ctx.fillStyle=this.color,this.ctx.beginPath(),this.ctx.arc(this.x,this.y,this.r,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()},o.prototype.update=function(){this.x+=this.vx,this.y+=this.vy},o}(o.default);exports.default=n;
},{"../config":"foLc","./Sprite":"iWx2"}],"E1Sc":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var i,r=require("../config"),n=e(require("./Sprite"));!function(t){t[t.Up=1]="Up",t[t.Down=2]="Down",t[t.Left=4]="Left",t[t.Right=8]="Right"}(i||(i={}));var o=function(e){function n(t,n,o){var a=e.call(this,t,n,o)||this;return a.color=r.PlayerColor,a.angle=0,a.direction=0,a.handleKeyDown=function(t){switch(t.key){case"w":case"ArrowUp":a.direction|=i.Up;break;case"s":case"ArrowDown":a.direction|=i.Down;break;case"a":case"ArrowLeft":a.direction|=i.Left;break;case"d":case"ArrowRight":a.direction|=i.Right}},a.handleKeyUp=function(t){switch(t.key){case"w":case"ArrowUp":a.direction^=i.Up;break;case"s":case"ArrowDown":a.direction^=i.Down;break;case"a":case"ArrowLeft":a.direction^=i.Left;break;case"d":case"ArrowRight":a.direction^=i.Right}},a}return t(n,e),n.prototype.startListener=function(){window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp)},n.prototype.stopListener=function(){window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp)},n.prototype.render=function(){this.ctx.fillStyle=this.color,this.ctx.save(),this.getPlayerPath(),this.ctx.fill(),this.ctx.restore()},n.prototype.getPlayerPath=function(){this.ctx.beginPath();var t=this.getPlayerAngles();this.ctx.moveTo(t[0].x,t[0].y),this.ctx.lineTo(t[1].x,t[1].y),this.ctx.lineTo(t[2].x,t[2].y),this.ctx.closePath()},n.prototype.getPlayerAngles=function(){var t=this,e=r.PlayerHeight/2;return[{x:this.x,y:this.y-e},{x:this.x-Math.cos(Math.PI/6)*e,y:this.y+Math.sin(Math.PI/6)*e},{x:this.x+Math.cos(Math.PI/6)*e,y:this.y+Math.sin(Math.PI/6)*e}].map(function(e){var i=e.x,r=e.y;return{x:t.x+(i-t.x)*Math.cos(t.angle)-(r-t.y)*Math.sin(t.angle),y:t.y+(r-t.y)*Math.cos(t.angle)+(i-t.x)*Math.sin(t.angle)}})},n.prototype.update=function(){switch(this.direction&i.Up&&(this.y-=r.PlayerStep),this.direction&i.Down&&(this.y+=r.PlayerStep),this.direction&i.Left&&(this.x-=r.PlayerStep),this.direction&i.Right&&(this.x+=r.PlayerStep),this.direction){case i.Up:this.angle=0;break;case i.Down:this.angle=Math.PI;break;case i.Left:this.angle=Math.PI/2*3;break;case i.Right:this.angle=Math.PI/2;break;case i.Left|i.Up:this.angle=-Math.PI/4;break;case i.Left|i.Down:this.angle=-Math.PI/4*3;break;case i.Right|i.Up:this.angle=Math.PI/4;break;case i.Right|i.Down:this.angle=Math.PI/4*3}},n.prototype.isCrash=function(t){var e=!1;if(this.ctx.save(),this.getPlayerPath(),e=this.ctx.isPointInPath(t.x,t.y),this.ctx.restore(),!e)for(var i=this.getPlayerAngles(),r=0;r<i.length;r++){var n=i[r],o=r===i.length-1?i[0]:i[r+1],a={x:o.x-n.x,y:o.y-n.y},s={x:t.x-n.x,y:t.y-n.y},h=Math.sqrt(a.x*a.x+a.y*a.y),c=(a={x:a.x/h,y:a.y/h}).x*s.x+a.y*s.y,y=void 0,l=void 0;if(c<=0?(y=n.x,l=n.y):c>=h?(y=o.x,l=o.y):(y=n.x+c*a.x,l=n.y+c*a.y),Math.sqrt(Math.pow(t.x-y,2)+Math.pow(t.y-l,2))<t.r){e=!0;break}}return e},n}(n.default);exports.default=o;
},{"../config":"foLc","./Sprite":"iWx2"}],"dgAm":[function(require,module,exports) {
"use strict";var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var e=t(require("./sprite/BulletSprite")),i=require("./config"),h=t(require("./sprite/PlayreSprite")),s=function(){function t(t,e){this.canvas=t,this.isStart=!1,this.bullets=[],this.second=0;var i=window.devicePixelRatio||1;this.canvas.width=this.width=e.width*i,this.canvas.height=this.height=e.height*i,this.canvas.style.width=e.width+"px",this.canvas.style.height=e.height+"px",this.ctx=this.canvas.getContext("2d")}return Object.defineProperty(t.prototype,"count",{get:function(){return~~(this.second/1e3)},enumerable:!1,configurable:!0}),t.prototype.start=function(){var t=this;if(!this.isStart){this.player=new h.default(this.ctx,this.width/2,this.height/2),this.player.startListener();this.isStart=!0,requestAnimationFrame(function e(){if(!t.isStart)return t.render(),void(null==t||t.onGameOver(t.count));t.second+=16.67,t.render(),t.update(),requestAnimationFrame(e)})}},t.prototype.stop=function(){var t;this.isStart=!1,null===(t=this.player)||void 0===t||t.stopListener(),this.bullets.length=0,this.second=0},t.prototype.addNewBullet=function(){var t={x:this.width/2,y:this.height/2},h=Math.random()*(i.BulletRadiusRange[1]-i.BulletRadiusRange[0])+i.BulletRadiusRange[0],s=[{x:Math.random()*this.width,y:2*-h},{x:Math.random()*this.width,y:this.height+2*h},{x:2*-h,y:Math.random()*this.height},{x:this.width+2*h,y:Math.random()*this.height}][~~(4*Math.random())],r=s.x,n=s.y,a=new e.default(this.ctx,r,n,h,t);this.bullets.push(a)},t.prototype.render=function(){this.ctx.clearRect(0,0,this.width,this.height),this.renderBackground(),this.renderCount(),this.player.render(),this.bullets.forEach(function(t){return t.render()})},t.prototype.update=function(){var t=this;this.player.update(),this.bullets=this.bullets.filter(function(e){return e.update(),t.player.isCrash(e)&&(t.isStart=!1),!(e.x<2*-e.r||e.x>t.width+2*e.r||e.y<2*-e.r||e.y>t.height+2*e.r)});for(var e=this.bullets.length;e<i.BulletCount;e++)this.addNewBullet()},t.prototype.renderBackground=function(){this.ctx.fillStyle=i.BackgroundColor,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.renderCount=function(){this.ctx.font=i.CountFont,this.ctx.textAlign="right",this.ctx.fillStyle="#000",this.ctx.fillText(""+this.count,this.width-20,50)},t}();exports.default=s;
},{"./sprite/BulletSprite":"qxir","./config":"foLc","./sprite/PlayreSprite":"E1Sc"}],"B6dB":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("./game")),r=new t.default(document.getElementById("app"),{width:600,height:600});r.start(),r.onGameOver=function(e){setTimeout(function(){e<10?alert("你只坚持了 "+e+" 秒，有点弱诶 🥴"):e<20?alert("你坚持了 "+e+" 秒，还算不错 🤓"):e<30?alert("你坚持了 "+e+" 秒，强啊 🤠"):alert("你坚持了 "+e+" 秒，你已经超神了！🥳"),r.stop(),r.start()})};
},{"./game":"dgAm"}]},{},["B6dB"], null)
//# sourceMappingURL=src.b8b5acf2.js.map